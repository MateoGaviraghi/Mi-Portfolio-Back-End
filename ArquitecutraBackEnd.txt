ğŸ“¦ Arquitectura Backend - Portfolio API
ğŸ—ï¸ Estructura del Proyecto
portfolio-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”œâ”€â”€ strategies/
â”‚   â”‚   â”‚   â””â”€â”€ jwt.strategy.ts
â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â”œâ”€â”€ jwt-auth.guard.ts
â”‚   â”‚   â”‚   â””â”€â”€ roles.guard.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ login.dto.ts
â”‚   â”‚       â””â”€â”€ register.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”‚   â”œâ”€â”€ users.service.ts
â”‚   â”‚   â”œâ”€â”€ users.module.ts
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â””â”€â”€ user.schema.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ create-user.dto.ts
â”‚   â”‚       â””â”€â”€ update-user.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ projects/
â”‚   â”‚   â”œâ”€â”€ projects.controller.ts
â”‚   â”‚   â”œâ”€â”€ projects.service.ts
â”‚   â”‚   â”œâ”€â”€ projects.module.ts
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â””â”€â”€ project.schema.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â”œâ”€â”€ create-project.dto.ts
â”‚   â”‚       â””â”€â”€ update-project.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ reviews/
â”‚   â”‚   â”œâ”€â”€ reviews.controller.ts
â”‚   â”‚   â”œâ”€â”€ reviews.service.ts
â”‚   â”‚   â”œâ”€â”€ reviews.module.ts
â”‚   â”‚   â”œâ”€â”€ schemas/
â”‚   â”‚   â”‚   â””â”€â”€ review.schema.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â””â”€â”€ create-review.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â”œâ”€â”€ skills.controller.ts
â”‚   â”‚   â”œâ”€â”€ skills.service.ts
â”‚   â”‚   â”œâ”€â”€ skills.module.ts
â”‚   â”‚   â””â”€â”€ schemas/
â”‚   â”‚       â””â”€â”€ skill.schema.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ analytics/
â”‚   â”‚   â”œâ”€â”€ analytics.controller.ts
â”‚   â”‚   â”œâ”€â”€ analytics.service.ts
â”‚   â”‚   â”œâ”€â”€ analytics.module.ts
â”‚   â”‚   â””â”€â”€ schemas/
â”‚   â”‚       â””â”€â”€ visitor.schema.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ ai-insights/
â”‚   â”‚   â”œâ”€â”€ ai-insights.controller.ts
â”‚   â”‚   â”œâ”€â”€ ai-insights.service.ts
â”‚   â”‚   â”œâ”€â”€ ai-insights.module.ts
â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚       â””â”€â”€ ai-analysis.dto.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚   â”‚   â”‚   â”œâ”€â”€ roles.decorator.ts
â”‚   â”‚   â”‚   â””â”€â”€ public.decorator.ts
â”‚   â”‚   â”œâ”€â”€ filters/
â”‚   â”‚   â”‚   â””â”€â”€ http-exception.filter.ts
â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â”‚   â”œâ”€â”€ logging.interceptor.ts
â”‚   â”‚   â”‚   â””â”€â”€ transform.interceptor.ts
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ rate-limit.middleware.ts
â”‚   â”‚   â””â”€â”€ pipes/
â”‚   â”‚       â””â”€â”€ validation.pipe.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ configuration.ts
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”œâ”€â”€ jwt.config.ts
â”‚   â”‚   â””â”€â”€ swagger.config.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ app.module.ts
â”‚   â””â”€â”€ main.ts
â”‚
â”œâ”€â”€ test/
â”œâ”€â”€ .env
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ nest-cli.json
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vercel.json
â””â”€â”€ README.md
ğŸ”§ ConfiguraciÃ³n de MÃ³dulos
1. Main.ts - Punto de entrada
typescript// ConfiguraciÃ³n principal con Swagger
- CORS configurado para el frontend
- Swagger UI en /api/docs
- ValidaciÃ³n global con class-validator
- Rate limiting para protecciÃ³n
- Helmet para seguridad
2. App Module - MÃ³dulo raÃ­z
typescript@Module({
  imports: [
    ConfigModule.forRoot(),
    MongooseModule.forRoot(),
    AuthModule,
    UsersModule,
    ProjectsModule,
    ReviewsModule,
    SkillsModule,
    AnalyticsModule,
    AiInsightsModule,
    ThrottlerModule // Rate limiting
  ]
})
ğŸ“Š Schemas de MongoDB
User Schema
typescript{
  email: string (unique),
  password: string (hashed),
  name: string,
  role: enum ['visitor', 'admin'],
  avatar?: string,
  bio?: string,
  linkedin?: string,
  github?: string,
  reviews: Review[],
  createdAt: Date,
  updatedAt: Date
}
Project Schema
typescript{
  title: string,
  description: string,
  longDescription: string,
  technologies: string[],
  images: string[], // URLs de Cloudinary
  videos?: string[], // URLs de Cloudinary
  githubUrl?: string,
  liveUrl?: string,
  category: enum ['web', 'mobile', 'ai', 'backend'],
  featured: boolean,
  aiGenerated: {
    percentage: number,
    tools: string[],
    description: string
  },
  stats: {
    views: number,
    likes: number
  },
  createdAt: Date,
  updatedAt: Date
}
Review Schema
typescript{
  user: ObjectId (ref: User),
  rating: number (1-5),
  comment: string,
  isPublic: boolean,
  createdAt: Date
}
Skill Schema
typescript{
  name: string,
  category: enum ['frontend', 'backend', 'tools', 'ai'],
  level: number (1-100),
  icon: string,
  yearsExperience: number
}
ğŸ” AutenticaciÃ³n y Seguridad
JWT Strategy

Access Token: 15 minutos
Refresh Token: 7 dÃ­as
Roles: Admin, Visitor

Guards Implementados

JwtAuthGuard: Protege rutas privadas
RolesGuard: Control de acceso por roles
PublicDecorator: Marca rutas pÃºblicas

ğŸ“¡ Endpoints API
Auth

POST /auth/register - Registro pÃºblico
POST /auth/login - Login
POST /auth/refresh - Refresh token
POST /auth/logout - Logout

Projects

GET /projects - Lista pÃºblica
GET /projects/:id - Detalle pÃºblico
POST /projects - Crear (Admin)
PUT /projects/:id - Actualizar (Admin)
DELETE /projects/:id - Eliminar (Admin)

Reviews

GET /reviews - Lista pÃºblica
POST /reviews - Crear (Auth required)
DELETE /reviews/:id - Eliminar (Owner/Admin)

Analytics

POST /analytics/visit - Registrar visita
GET /analytics/stats - EstadÃ­sticas (Admin)

AI Insights

GET /ai-insights/project-analysis - AnÃ¡lisis de proyecto con IA
POST /ai-insights/code-review - Review de cÃ³digo con IA

ğŸš€ ConfiguraciÃ³n para Vercel
vercel.json
json{
  "version": 2,
  "builds": [
    {
      "src": "dist/main.js",
      "use": "@vercel/node"
    }
  ],
  "routes": [
    {
      "src": "/(.*)",
      "dest": "dist/main.js"
    }
  ],
  "env": {
    "NODE_ENV": "production"
  }
}
ğŸ”§ Variables de Entorno
env# Database
MONGODB_URI=mongodb+srv://...

# JWT
JWT_SECRET=your-secret-key
JWT_REFRESH_SECRET=your-refresh-secret

# Configs
PORT=3001
NODE_ENV=production

# CORS
FRONTEND_URL=https://your-portfolio.vercel.app

# AI Integration (opcional)
OPENAI_API_KEY=your-api-key

# Rate Limiting
THROTTLE_TTL=60
THROTTLE_LIMIT=10
ğŸ“¦ Dependencias Principales
json{
  "@nestjs/core": "^10.0.0",
  "@nestjs/mongoose": "^10.0.0",
  "@nestjs/jwt": "^10.0.0",
  "@nestjs/passport": "^10.0.0",
  "@nestjs/swagger": "^7.0.0",
  "mongoose": "^7.0.0",
  "bcrypt": "^5.0.0",
  "class-validator": "^0.14.0",
  "class-transformer": "^0.5.0",
  "helmet": "^7.0.0",
  "@nestjs/throttler": "^5.0.0"
}
ğŸ¯ Features Especiales con IA
1. AI Code Analysis

Endpoint que analiza el cÃ³digo de los proyectos
Muestra quÃ© porcentaje fue generado con IA
Identifica patrones y mejores prÃ¡cticas

2. AI-Powered Reviews

Sugerencias automÃ¡ticas de mejora
AnÃ¡lisis de sentimiento en reviews

3. Smart Analytics

Predicciones de trÃ¡fico
AnÃ¡lisis de comportamiento de usuarios

ğŸ“ Scripts NPM
json{
  "start:dev": "nest start --watch",
  "build": "nest build",
  "start:prod": "node dist/main",
  "test": "jest",
  "test:e2e": "jest --config ./test/jest-e2e.json",
  "lint": "eslint \"{src,apps,libs,test}/**/*.ts\"",
  "format": "prettier --write \"src/**/*.ts\""
}
ğŸ”„ CI/CD Pipeline
GitHub Actions
yamlname: Deploy to Vercel
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run build
      - run: npm test
      - uses: amondnet/vercel-action@v20
ğŸ“Š Monitoreo y Logs

Winston Logger: Para logs estructurados
Sentry: Para tracking de errores
MongoDB Atlas: Monitoring de base de datos
Vercel Analytics: Para mÃ©tricas de deployment

ğŸ¯ Propuesta de Fases:

FASE 1: ConfiguraciÃ³n Base ğŸ—ï¸

= Configurar variables de entorno
= Conectar MongoDB
- Configurar Swagger
- Setup bÃ¡sico de seguridad (CORS, Helmet)

FASE 2: AutenticaciÃ³n ğŸ”

User Schema
- Auth Module (Register/Login/Refresh)
- JWT Strategy & Guards
- Roles Decorator

FASE 3: MÃ³dulos Core ğŸ“¦

- Projects Module (CRUD completo)
- Skills Module
- Reviews Module

FASE 4: Features Avanzadas ğŸš€
- Analytics Module
- AI Insights Module
- Interceptors y Filters

FASE 5: Testing & Deploy ğŸ‰

- Tests E2E
- ConfiguraciÃ³n Vercel
- CI/CD con GitHub Actions
- DocumentaciÃ³n final